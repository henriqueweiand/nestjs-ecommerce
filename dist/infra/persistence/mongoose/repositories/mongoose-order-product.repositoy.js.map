{"version":3,"sources":["../../../../../src/infra/persistence/mongoose/repositories/mongoose-order-product.repositoy.ts"],"sourcesContent":["import { OrderProductRepository } from \"@app/application/ecommerce/ports/order-product.repositoy\";\nimport { OrderProduct } from \"@app/domain/ecommerce/order-product\";\nimport { OrderProduct as OrderProductMongoose } from \"../entities/order-product.entity\";\nimport { Injectable } from \"@nestjs/common\";\nimport { MongooseOrderProductMapper } from \"../mapper/mongoose-order-product-mapper\";\nimport { Model } from \"mongoose\";\nimport { InjectModel } from \"@nestjs/mongoose\";\n\n@Injectable()\nexport class MongooseOrderProductRepository implements OrderProductRepository {\n    constructor(\n        @InjectModel(OrderProductMongoose.name) private readonly productOrderModel: Model<OrderProductMongoose>\n    ) { }\n\n    async create(orderProduct: OrderProduct): Promise<OrderProduct> {\n        const data = MongooseOrderProductMapper.toMongoose(orderProduct);\n        const createdOrderProduct = await this.productOrderModel.create(data);\n\n        return MongooseOrderProductMapper.toDomain(createdOrderProduct);\n    }\n\n    async createMany(orderProducts: OrderProduct[]): Promise<OrderProduct[]> {\n        if (orderProducts.length === 0) {\n            return [];\n        }\n\n        const data = orderProducts.map((product) => MongooseOrderProductMapper.toMongoose(product));\n        const createdOrderProductProducts = await this.productOrderModel.create(data);\n\n        return createdOrderProductProducts.map(MongooseOrderProductMapper.toDomain);\n    }\n}"],"names":["MongooseOrderProductRepository","create","orderProduct","data","MongooseOrderProductMapper","toMongoose","createdOrderProduct","productOrderModel","toDomain","createMany","orderProducts","length","map","product","createdOrderProductProducts","constructor","Injectable","InjectModel","OrderProductMongoose","name"],"mappings":";;;;+BASaA;;;eAAAA;;;oCAPwC;wBAC1B;4CACgB;0BACrB;2BACM;;;;;;;;;;;;;;;AAGrB,IAAA,AAAMA,iCAAN,MAAMA;IAKT,MAAMC,OAAOC,YAA0B,EAAyB;QAC5D,MAAMC,OAAOC,sDAA0B,CAACC,UAAU,CAACH;QACnD,MAAMI,sBAAsB,MAAM,IAAI,CAACC,iBAAiB,CAACN,MAAM,CAACE;QAEhE,OAAOC,sDAA0B,CAACI,QAAQ,CAACF;IAC/C;IAEA,MAAMG,WAAWC,aAA6B,EAA2B;QACrE,IAAIA,cAAcC,MAAM,KAAK,GAAG;YAC5B,OAAO,EAAE;QACb;QAEA,MAAMR,OAAOO,cAAcE,GAAG,CAAC,CAACC,UAAYT,sDAA0B,CAACC,UAAU,CAACQ;QAClF,MAAMC,8BAA8B,MAAM,IAAI,CAACP,iBAAiB,CAACN,MAAM,CAACE;QAExE,OAAOW,4BAA4BF,GAAG,CAACR,sDAA0B,CAACI,QAAQ;IAC9E;IApBAO,YACI,AAAyDR,iBAA8C,CACzG;aAD2DA,oBAAAA;IACzD;AAmBR;AAtBaP;IADZgB,IAAAA,kBAAU;IAGFC,aAAAA,IAAAA,sBAAW,EAACC,gCAAoB,CAACC,IAAI;;;eAAsC,eAAK,4BAAL,eAAK;;GAF5EnB"}