{"version":3,"sources":["../../../../../src/infra/persistence/prisma/repositories/prisma-order-product.repositoy.ts"],"sourcesContent":["import { OrderProductRepository } from \"@app/application/ecommerce/ports/order-product.repositoy\";\nimport { OrderProduct } from \"@app/domain/ecommerce/order-product\";\nimport { Injectable } from \"@nestjs/common\";\nimport { PrismaOrderProductMapper } from \"../mapper/prisma-order-product-mapper\";\nimport { PrismaService } from \"../prisma.service\";\n\n@Injectable()\nexport class PrismaOrderProductRepository implements OrderProductRepository {\n    constructor(\n        private prisma: PrismaService,\n    ) { }\n\n    async create(orderProduct: OrderProduct): Promise<OrderProduct> {\n        const data = PrismaOrderProductMapper.toPrisma(orderProduct);\n        const createdOrderProduct = await this.prisma.orderProduct.create({ data });\n\n        return PrismaOrderProductMapper.toDomain(createdOrderProduct);\n    }\n\n    async createMany(orderProducts: OrderProduct[]): Promise<OrderProduct[]> {\n        if (orderProducts.length === 0) {\n            return [];\n        }\n\n        const data = PrismaOrderProductMapper.toPrismaCreateMany(orderProducts);\n\n        const createdOrderProducts = await this.prisma.$transaction(\n            data.map((item) => this.prisma.orderProduct.create({ data: item }))\n        );\n\n        return createdOrderProducts.map(PrismaOrderProductMapper.toDomain);\n    }\n}"],"names":["PrismaOrderProductRepository","create","orderProduct","data","PrismaOrderProductMapper","toPrisma","createdOrderProduct","prisma","toDomain","createMany","orderProducts","length","toPrismaCreateMany","createdOrderProducts","$transaction","map","item","constructor","Injectable"],"mappings":";;;;+BAOaA;;;eAAAA;;;wBALc;0CACc;+BACX;;;;;;;;;;AAGvB,IAAA,AAAMA,+BAAN,MAAMA;IAKT,MAAMC,OAAOC,YAA0B,EAAyB;QAC5D,MAAMC,OAAOC,kDAAwB,CAACC,QAAQ,CAACH;QAC/C,MAAMI,sBAAsB,MAAM,IAAI,CAACC,MAAM,CAACL,YAAY,CAACD,MAAM,CAAC;YAAEE;QAAK;QAEzE,OAAOC,kDAAwB,CAACI,QAAQ,CAACF;IAC7C;IAEA,MAAMG,WAAWC,aAA6B,EAA2B;QACrE,IAAIA,cAAcC,MAAM,KAAK,GAAG;YAC5B,OAAO,EAAE;QACb;QAEA,MAAMR,OAAOC,kDAAwB,CAACQ,kBAAkB,CAACF;QAEzD,MAAMG,uBAAuB,MAAM,IAAI,CAACN,MAAM,CAACO,YAAY,CACvDX,KAAKY,GAAG,CAAC,CAACC,OAAS,IAAI,CAACT,MAAM,CAACL,YAAY,CAACD,MAAM,CAAC;gBAAEE,MAAMa;YAAK;QAGpE,OAAOH,qBAAqBE,GAAG,CAACX,kDAAwB,CAACI,QAAQ;IACrE;IAvBAS,YACI,AAAQV,MAAqB,CAC/B;aADUA,SAAAA;IACR;AAsBR;AAzBaP;IADZkB,IAAAA,kBAAU;;;eAGa,4BAAa,4BAAb,4BAAa;;GAFxBlB"}