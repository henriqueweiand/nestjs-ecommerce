{"version":3,"sources":["../../../src/infra/http/checkout.controller.ts"],"sourcesContent":["import { CheckoutUrlUseCase } from '@app/application/ecommerce/use-case/checkout-url';\nimport { CacheKey } from '@nestjs/cache-manager';\nimport {\n    Controller,\n    Get,\n    Headers,\n    Param,\n    Post,\n    RawBodyRequest,\n    Req,\n    UseInterceptors\n} from '@nestjs/common';\nimport { Request } from 'express';\nimport { CheckoutCompleteUseCase } from '@app/application/ecommerce/use-case/checkout-complete';\nimport { ApiTags } from '@nestjs/swagger';\nimport { HttpCacheInterceptor } from '../persistence/cache/interceptor/http-cache.interceptor';\n\n@Controller('/checkout')\n@ApiTags('Checkout')\nexport class CheckoutController {\n    constructor(\n        private checkoutUrlUseCase: CheckoutUrlUseCase,\n        private checkoutCompleteUseCase: CheckoutCompleteUseCase,\n    ) { }\n\n    @Get(':orderId/url')\n    @CacheKey(':orderId/url')\n    @UseInterceptors(HttpCacheInterceptor)\n    checkoutUrl(@Param('orderId') orderId: string) {\n        const response = this.checkoutUrlUseCase.execute(orderId);\n        return response;\n    }\n\n    @Post('completed')\n    checkoutComplete(\n        @Headers() requestHeaders: Request['headers'],\n        @Req() req: RawBodyRequest<Request>\n    ) {\n        const response = this.checkoutCompleteUseCase.execute({\n            headers: requestHeaders,\n            req: req\n        });\n        return response;\n    }\n}\n"],"names":["CheckoutController","checkoutUrl","orderId","response","checkoutUrlUseCase","execute","checkoutComplete","requestHeaders","req","checkoutCompleteUseCase","headers","constructor","Get","CacheKey","UseInterceptors","HttpCacheInterceptor","Param","Post","Headers","Req","Controller","ApiTags"],"mappings":";;;;+BAmBaA;;;eAAAA;;;6BAnBsB;8BACV;wBAUlB;kCAEiC;yBAChB;sCACa;;;;;;;;;;;;;;;AAI9B,IAAA,AAAMA,qBAAN,MAAMA;IASTC,YAAY,AAAkBC,OAAe,EAAE;QAC3C,MAAMC,WAAW,IAAI,CAACC,kBAAkB,CAACC,OAAO,CAACH;QACjD,OAAOC;IACX;IAGAG,iBACI,AAAWC,cAAkC,EAC7C,AAAOC,GAA4B,EACrC;QACE,MAAML,WAAW,IAAI,CAACM,uBAAuB,CAACJ,OAAO,CAAC;YAClDK,SAASH;YACTC,KAAKA;QACT;QACA,OAAOL;IACX;IAvBAQ,YACI,AAAQP,kBAAsC,EAC9C,AAAQK,uBAAgD,CAC1D;aAFUL,qBAAAA;aACAK,0BAAAA;IACR;AAqBR;;IAnBKG,IAAAA,WAAG,EAAC;IACJC,IAAAA,sBAAQ,EAAC;IACTC,IAAAA,uBAAe,EAACC,0CAAoB;IACxBC,aAAAA,IAAAA,aAAK,EAAC;;;;;;GATVhB;;IAcRiB,IAAAA,YAAI,EAAC;IAEDC,aAAAA,IAAAA,eAAO;IACPC,aAAAA,IAAAA,WAAG;;;;eAAQ,sBAAc,4BAAd,sBAAc;;;GAjBrBnB;AAAAA;IAFZoB,IAAAA,kBAAU,EAAC;IACXC,IAAAA,gBAAO,EAAC;;;eAG2B,+BAAkB,4BAAlB,+BAAkB;eACb,yCAAuB,4BAAvB,yCAAuB;;GAHnDrB"}