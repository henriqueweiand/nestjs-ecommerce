{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app.module';\nimport { EnvService } from './infra/env/env.service';\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';\nimport { ValidationPipe } from '@nestjs/common';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule, {\n    snapshot: true,\n    rawBody: true,\n  })\n\n  const configService = app.get(EnvService)\n  const port = configService.get('PORT')\n\n  function getSwaggerServerUrl() {\n    switch (process.env.NODE_ENV) {\n      case 'production':\n        return 'https://nestjs-ecommerce-alpha.vercel.app';\n      default:\n        return `http://localhost:${port}`;\n    }\n  }\n\n  app.useGlobalPipes(new ValidationPipe({\n    transform: true,\n    whitelist: true,\n  }));\n\n  const config = new DocumentBuilder()\n    .setTitle('API')\n    .setVersion('0.1')\n    .addServer(getSwaggerServerUrl())\n    .build();\n  const document = SwaggerModule.createDocument(app, config);\n  SwaggerModule.setup('api', app, document);\n\n  await app.listen(port);\n}\nbootstrap();\n"],"names":["bootstrap","app","NestFactory","create","AppModule","snapshot","rawBody","configService","get","EnvService","port","getSwaggerServerUrl","process","env","NODE_ENV","useGlobalPipes","ValidationPipe","transform","whitelist","config","DocumentBuilder","setTitle","setVersion","addServer","build","document","SwaggerModule","createDocument","setup","listen"],"mappings":";;;;sBAA4B;2BACF;4BACC;yBACoB;wBAChB;AAE/B,eAAeA;IACb,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAACC,oBAAS,EAAE;QAC9CC,UAAU;QACVC,SAAS;IACX;IAEA,MAAMC,gBAAgBN,IAAIO,GAAG,CAACC,sBAAU;IACxC,MAAMC,OAAOH,cAAcC,GAAG,CAAC;IAE/B,SAASG;QACP,OAAQC,QAAQC,GAAG,CAACC,QAAQ;YAC1B,KAAK;gBACH,OAAO;YACT;gBACE,OAAO,CAAC,iBAAiB,EAAEJ,KAAK,CAAC;QACrC;IACF;IAEAT,IAAIc,cAAc,CAAC,IAAIC,sBAAc,CAAC;QACpCC,WAAW;QACXC,WAAW;IACb;IAEA,MAAMC,SAAS,IAAIC,wBAAe,GAC/BC,QAAQ,CAAC,OACTC,UAAU,CAAC,OACXC,SAAS,CAACZ,uBACVa,KAAK;IACR,MAAMC,WAAWC,sBAAa,CAACC,cAAc,CAAC1B,KAAKkB;IACnDO,sBAAa,CAACE,KAAK,CAAC,OAAO3B,KAAKwB;IAEhC,MAAMxB,IAAI4B,MAAM,CAACnB;AACnB;AACAV"}